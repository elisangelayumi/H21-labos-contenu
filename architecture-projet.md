# Architecture du projet

## Flux d'appels

- [Diag. séquence feature 1](https://teams.microsoft.com/l/file/880E6DF8-32F3-4D32-B763-19614BA5A943?tenantId=56778bd5-6a3f-4bd3-a265-93163e4d5bfe&fileType=pdf&objectUrl=https%3A%2F%2Fulavaldti.sharepoint.com%2Fsites%2FGLO-2003-Hiver2021%2FDocuments%20partages%2FAnnonces%2Farchitecture-tp1-feature1.pdf&baseUrl=https%3A%2F%2Fulavaldti.sharepoint.com%2Fsites%2FGLO-2003-Hiver2021&serviceName=teams&threadId=19:afdb3ddfedbf4723948e73d7f38194d1@thread.tacv2&groupId=6c373767-5a7b-4409-a44c-9673ff22a815)
- [Diag. séquence feature 2](https://teams.microsoft.com/l/file/34E4C205-A118-482E-A6BB-261C3E07DA68?tenantId=56778bd5-6a3f-4bd3-a265-93163e4d5bfe&fileType=pdf&objectUrl=https%3A%2F%2Fulavaldti.sharepoint.com%2Fsites%2FGLO-2003-Hiver2021%2FDocuments%20partages%2FAnnonces%2Farchitecture-tp1-feature2.pdf&baseUrl=https%3A%2F%2Fulavaldti.sharepoint.com%2Fsites%2FGLO-2003-Hiver2021&serviceName=teams&threadId=19:afdb3ddfedbf4723948e73d7f38194d1@thread.tacv2&groupId=6c373767-5a7b-4409-a44c-9673ff22a815)

## Type de classes de données

| Type                              | Couche        | Contenu                                                                                                                                                                       | Création/Assemblage                                                                                                                                                                                                                                                                     |
| --------------------------------- | ------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `Request`<br/>(une sorte de DTO)  | `Api`         | - Types de base<br/>- Autres `Request`s<br/>- PAS de méthodes<br/>- Attributs publics<br/>- "Lecture seulement"                                                               | - Assemblé par Jersey à partir du payload/body de la requête                                                                                                                                                                                                                            |
| `Response`<br/>(une sorte de DTO) | `Api`         | - Types de base<br/>- Autres `Response`s<br/>- PAS de méthodes<br/>- Attributs publics<br/>- "Lecture seulement"                                                              | - Assemblé par `DtoAssembler` à partir d'un `Dto`<br/>(de la couche `Application`)                                                                                                                                                                                                      |
| `Dto`                             | `Application` | - Types de base<br/>- `ValueObject`s<br/>- Autres `DTO`s<br/>- PAS de méthodes<br/>- Attributs publics<br/>- "Lecture seulement"                                              | - Assemblé par `DtoAssembler` à partir d'une `Request`<br/>- Assemblé par `Assember` à partir d'un `Entity`                                                                                                                                                                             |
| `Entity`                          | `Entities`    | - Types de base<br/>- `ValueObject`s<br/>- Autres `Entities`<br/>- Méthodes pour mutation/actions<br/>- Attributs privés<br/>- Lecture et écriture                            | - Créé par `Factory` à partir d'arguments<br/>(attributs des `Dto`s si création dans `UseCase`)<br/>:warning: Ne pas envoyer de `Dto` directement en<br/>argument d'une `Factory` car le `Dto` provient<br/>d'une couche inférieure!<br/>- Assemblé par `Assembler` à partir d'un `Dto` |
| `ValueObject`                     | `Entities`    | - Types de base<br/>- Autres `ValueObject`s<br/>- Méthodes pour opérations<br/>(:warning immuable! retourne copie!)<br/>- Attributs privés<br/>- Lecture, écriture par copie | - Créé par n'importe quelle couche/classe<br/>(comme un type de base)                                                                                                                                                                                                                   |

## Types de classes par couche

| Api                                                                                                                        | Application                                                                                        | Entities                                                                       | Infrastructure                   |
| -------------------------------------------------------------------------------------------------------------------------- | -------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------ | -------------------------------- |
| *traitements*:<br/>- `Resource`<br/>*données*:<br/>- `Request`<br/>- `Response`<br/>*transformations*<br/>- `DtoAssembler` | *traitements*:<br/>- `UseCase`<br/>*données*:<br/>- `Dto`<br/>*transformations*:<br/>- `Assembler` | - `ValueObject`<br/>- `Entity`<br/>- `Factory`<br/>- `Repository` (interfaces) | - `Repository` (implementations) |
